!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("underscore"),require("moment")):"function"==typeof define&&define.amd?define(["underscore","moment"],t):"object"==typeof exports?exports.Sushi=t(require("underscore"),require("moment")):e.Sushi=t(e.underscore,e.moment)}(global,function(__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__4__){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(module,__webpack_exports__,__webpack_require__){"use strict";var underscore__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),underscore__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__),moment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),moment__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);const ARRAY_REFERENCE_REGEX=/(.*)\[(@|\*|\d+)]/g,processPath=e=>{if(!e)return[];let t,r=e.split(/\.|::/),n=[],a=(e,t,r)=>(n.push(t),"@"!==r&&"*"!==r&&(r=Number(r)),n.push(r),"");for(;r.length>0;)(t=(t=r.shift()).replace(ARRAY_REFERENCE_REGEX,a))&&n.push(t);return n},assignTo=(e,t,r,n)=>{let a,u=processPath(t);for(void 0!==r&&u.push(r);u.length;)a=u.shift(),u.length>0?(e[a]||("number"==typeof u[0]?e[a]=[]:e[a]={}),e=e[a]):e[a]=n},compact=(e,t)=>{let r,n=processPath(t);for(;n.length;)r=n.shift(),n.length>0?(e[r]||("number"==typeof n[0]?e[r]=[]:e[r]={}),e=e[r]):e[r]=underscore__WEBPACK_IMPORTED_MODULE_0___default.a.compact(e[r])},getDateTimeFormat=e=>{if(!e||"string"!=typeof e)return"";switch(e.length){case 10:return"YYYY-MM-DD";case 19:return"YYYY-MM-DD HH:mm:ss";case 8:return"HH:mm:ss";default:return""}},validateOperation=(e,t,r)=>{switch(r){case"years":case"months":case"weeks":case"days":if("HH:mm:ss"===e||"HH:mm:ss"===t)return!1;break;case"hours":case"minutes":case"seconds":if(("HH:mm:ss"===e||"HH:mm:ss"===t)&&e!==t)return!1}return!0},evalWithSafeEnvironment=function(){const __defaultSpec="seconds",__availableSpecs={Y:"years",M:"months",W:"weeks",D:"days",h:"hours",m:"minutes",s:"seconds",years:"years",months:"months",weeks:"weeks",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds"},__processStarOperator=(array,path)=>{let result=[];if(array&&underscore__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(array)&&array.length){let value,pushNestedElement=nestedElement=>{value.push(eval("nestedElement"+path))};for(let i=0,len=array.length;i<len;i++){if(underscore__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(array[i]))value=[],array[i].forEach(pushNestedElement);else{value=null;try{value=eval("array[i]"+path)}catch(e){console.warn(e)}}result.push(value)}}return result},dateDiff=(e,t,r)=>{let n=getDateTimeFormat(e),a=getDateTimeFormat(t);return r=__availableSpecs[r]||__defaultSpec,validateOperation(n,a,r)?(e=moment__WEBPACK_IMPORTED_MODULE_1___default()(e,n),t=moment__WEBPACK_IMPORTED_MODULE_1___default()(t,a),e.diff(t,r)):(console.warn("Invalid inputs at dateDiff."),null)},sum=e=>{let t=0;if(e&&underscore__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(e)&&e.length)for(let r=0,n=e.length;r<n;r++)e[r]&&(t+=e[r]);return t},extract=(e,t,r)=>{t=t||",",r=r||0;let n=(e="string"==typeof e?e:e||"").split(t)[r];return isNaN(n)?n:Number(n)},flatten=underscore__WEBPACK_IMPORTED_MODULE_0___default.a.flatten,groupConcat=(e,t=", ")=>e.join(t);function concat(){return Array.prototype.slice.call(arguments).join("")}const count=e=>e.length,avg=e=>{let t=sum(e);return e&&underscore__WEBPACK_IMPORTED_MODULE_0___default.a.isArray(e)&&e.length>0&&(t/=e.length),t},formatDate=(e,t)=>moment__WEBPACK_IMPORTED_MODULE_1___default()(e).format(t);return function(formula,data,metaData){return eval(formula)}}.call();__webpack_exports__.a={processPath:processPath,assignTo:assignTo,compact:compact,patterns:{variable:"{{([^}]+)}}",parsedExpression:"\\[\\*(\\d*)\\*\\]",invalidVariable:"\\[(?!(?:@|\\*|\\d+)\\]|[\\.$])|^[^\\[]*\\]|\\][^\\[]*\\]|[\\{\\}]|\\][]|\\][^\\.\\[]"},dataVarName:"data",metaDataVarName:"metaData",evalWithSafeEnvironment:evalWithSafeEnvironment}},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__1__},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return Array.isArray(e)},a=function(e){return"[object Object]"===Object.prototype.toString.call(e)};t.default={isArray:n,isObject:a,omit:function(e,t){if(!a(e))return e;t=n(t)?t:[t];var r={};for(var u in e)e.hasOwnProperty(u)&&-1===t.indexOf(u)&&(r[u]=e[u]);return r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=r(2),u=(n=a)&&n.__esModule?n:{default:n};var o=function(e){return u.default.isArray(e)?e:[e]},i=function(e,t,r){if(""===t)return e;for(var n=t.split(".");n.length&&e;){var a=n.shift(),u=new RegExp("(.+)\\[([0-9]*)\\]").exec(a);if(null!==u&&3===u.length){var o={arrName:u[1],arrIndex:u[2]};e=void 0!==e[o.arrName]?e[o.arrName][o.arrIndex]:void 0}else e=isNaN(a)?e[a]:e[void 0===e[a]?Number(a):a]}return void 0===e?r:e},s=function(e,t){return!e||(e=u.default.isArray(e)?e:[e]).reduce(function(e,r){var n=!1,a=r.indexOf("*");if(-1!==a){var u=r.lastIndexOf("*");-1!==u&&a!==u?n=t.includes(r.substring(a+1,u)):0===a?n=t.endsWith(r.substr(1)):a===r.length-1&&(n=t.startsWith(r.slice(0,-1)))}else n=t===r;return e||n},!1)},c=function(e,t){return Object.keys(e).filter(function(e){return s(t,e)})},l=function(e,t){t=t||"addition";var r={addition:{method:function(e,t){return e+t},neutral:0},subtraction:{method:function(e,t){return e-t},neutral:0},division:{method:function(e,t){return e/t},neutral:1},multiplication:{method:function(e,t){return e*t},neutral:1}};return e.reduce(function(e,n){return n=null==n?0:n,r[t].method(parseFloat(n)||r[t].neutral,e)},r[t].neutral)};t.default={get:i,set:function(e,t,r){for(var n,a=e,u=-1,o=(t=t.split(".")).length,i=o-1;null!==a&&++u<o;)a[n=t[u]]=u===i?r:void 0!==a[n]?a[n]:{},a=a[n];return e},extractMap:function(e,t,r){return o(t).map(function(t){return i(e,t,r)})},iterateMap:function(e,t,r,n){o(t).forEach(function(t){n(t,i(e,t,r))})},extractKeys:c,extractKeyValues:function(e,t){return c(e,t).map(function(t){return e[t]})},getKeys:function(e,t){return Object.keys(e).filter(function(e){return s(t,e)})},iterateKeys:function(e,t,r){Object.keys(e).forEach(function(e){s(t,e)&&r(e)})},evalValues:function(e,t){return e.reduce(function(e,r){return e||function(e,t){return!u.default.isArray(t)&&!u.default.isObject(t)&&("!"===e.charAt(0)?!t.includes(e.substr(1)):t.includes(e))}(r,t)},!1)},compare:function(e,t,r){var n={eq:function(e,t){return e===t},ne:function(e,t){return e!==t},lt:function(e,t){return e<t},gt:function(e,t){return e>t},le:function(e,t){return e<=t},ge:function(e,t){return e>=t}};return n[r=r||"eq"]?n[r](e,t):null},calculate:l,average:function(e){return 0===(e=e.filter(function(e){return null!=e})).length?0:l(e,"addition")/e.length},compareString:function(e,t,r){return{eq:function(e,t){return e===t},ne:function(e,t){return e!==t},includes:function(e,t){return e.includes(t)},startsWith:function(e,t){return e.startsWith(t)},endsWith:function(e,t){return e.endsWith(t)}}[r=r||"eq"](e,t)}}},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__4__},function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),u=r(0);const o=new RegExp(u.a.patterns.invalidVariable);class i{constructor(e){this._path=u.a.processPath(e),this._hasStar=this._path.indexOf("*")>-1,this._hasAt=this._path.indexOf("@")>-1,this._hasContext=this._hasAt,e.indexOf("::")>-1?this._environment=u.a.metaDataVarName:this._environment=u.a.dataVarName,""===e?this._parsedVariable="null":this._hasContext||(this._parsedVariable=i._parse(this._path,this._environment))}parseVariable(e){return this._parsedVariable||this._parseWithContext(e)}_parseWithContext(e){let t=0,r=e.length,n=this._path.length,u=this._path.slice();for(;t<r&&t<n;t++)if("@"===u[t]&&a.a.isNumber(e[t]))u[t]=Number(e[t]);else if(u[t]!==e[t]||"*"===u[t])break;for(;t<n;t++)if("@"===u[t])throw new Error("Context could not fully resolve");return i._parse(u,this._environment)}hasStar(){return this._hasStar}hasAt(){return this._hasAt}static isValid(e){return!o.test(e)}static _parse(e,t){let r,n=!1,a=t;for(let t=0,u=e.length;t<u;t++)"*"===(r=e[t])?(n?a+='")':n=!0,a="__processStarOperator("+a+',"'):a+="['"+r+"']";return n&&(a+='")'),a}}const s=new RegExp(u.a.patterns.variable,"g");class c{constructor(e,t){this._variables=[];for(var r=0,n=e.length;r<n;r++){var a=e[r];t=t.replace(new RegExp(a.pattern,"g"),a.replacement)}const u={};this._parsedExpression=t.replace(s,(e,t)=>i.isValid(t)?(u[t]||(u[t]=this._variables.length,this._variables.push(new i(t))),"[*"+u[t]+"*]"):"{{"+t+"}}")}eval(){throw new Error("Eval is not implemented")}getDependencies(){throw new Error("GetDependencies is not implemented")}}var l=[{pattern:"^=",replacement:""},{pattern:"'",replacement:"\\'"}];class f extends c{constructor(e){super(l,e)}eval(e,t,r){let n=null;try{let a=u.a.processPath(r),o=this._variables.map(e=>e.parseVariable(a)),i=this._parsedExpression.replace(/\[\*(\d*)\*\]/g,(e,t)=>o[parseInt(t)]);n=u.a.evalWithSafeEnvironment(i,e,t)}catch(e){console.warn(e)}return n}getDependencies(){return this._variables.map(e=>e.split("::").shift())}static isFormula(e){return"string"==typeof e&&0===e.indexOf("=")}}const d=[{pattern:"'",replacement:"\\'"}],p=new RegExp(u.a.patterns.variable),h=new RegExp(u.a.patterns.parsedExpression,"g");class _ extends c{constructor(e=""){super(d,e)}eval(e,t,r){let n="";try{let a=u.a.processPath(r),o=this._variables.map(r=>r.hasStar()?"":u.a.evalWithSafeEnvironment(r.parseVariable(a),e,t));n=this._parsedExpression.replace(h,(e,t)=>o[parseInt(t)])}catch(e){console.warn(e)}return n}getDependencies(){return this._variables.map(e=>e.split("::").shift())}static isConcatenatedText(e){return"string"==typeof e&&p.test(e)}}class v extends c{constructor(e){super([],""),this.value=e}eval(){return this.value}}r.d(t,"default",function(){return m});class m{constructor(e=""){f.isFormula(e)?this.compiledExpression=new f(e):_.isConcatenatedText(e)?this.compiledExpression=new _(e):this.compiledExpression=new v(e)}eval(e={},t={},r=""){return this.compiledExpression.eval(e,t,r)}static isFormulaValue(e){return f.isFormula(e)||_.isConcatenatedText(e)}}},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=f(r(7)),u=f(r(3)),o=f(r(8)),i=f(r(9)),s=f(r(10)),c=f(r(11)),l=f(r(2));function f(e){return e&&e.__esModule?e:{default:e}}var d={filters:o.default,mappers:i.default,selectors:s.default,reducers:c.default},p={overturn:function(e,t){return a.default.overturn(e,t.cont)},filters:function(e,t){return a.default.filter(e,t.cont,m)},pick:function(e,t){return a.default.pick(e,t.cont)},mappers:function(e,t){return a.default.map(e,t.cont,m)},explode:function(e,t){return a.default.explode(e,t.cont)},selectors:function(e,t){return a.default.select(e,t.cont,m)},uniq:function(e,t){return a.default.uniq(e,t.cont)},reducers:function(e,t){return[a.default.reduce(e,t.cont,m)]},pivot:function(e,t){return a.default.pivot(e,t.cont,m)},nest:function(e,t){var r=this,n=t.path,a=t.dest||n;return e.map(function(e){return u.default.set(e,a,g.call(r,u.default.get(e,n,[]),t.cont))})},classify:function(e,t){return a.default.classify(e,t.cont,m)},split:function(e,t){return a.default.split(e,t.cont,m)}},h=["overturn","filters","pick","sorters","mappers","explode","selectors","uniq","reducers","pivot"],_=function(e,t){var r=e[0];if(r&&h.reduce(function(e,t){return e||!!r[t]},!1)){var n=[];return e.forEach(function(e){Object.keys(e).forEach(function(t){n.push({op:t,cont:e[t]})})}),t&&(console.warn("Legacy recipe found."),console.log("New recipe :"),console.log(JSON.stringify(n,null,3))),n}return e},v=function(e,t,r){return p[(t=t||{}).op]?e=p[t.op].call(this,e,t,r):console.warn("Not found: "+t.op+"."),e},m=function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return d[e+"s"][t]?d[e+"s"][t].apply(void 0,n):y(e,t)},y=function(e,t){return console.warn(e+" "+t+" was not found in the available processes."),!1};function g(e,t,r){var n=this;return l.default.isObject(t)?t=[t]:l.default.isArray(t)||(t=[]),t=_(t,this.options.verbose),r&&(t=this.applyParameters(t,r)),t.forEach(function(t){e=v.call(n,e,t)}),e}e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t}return n(e,[{key:"addOperationsBundle",value:function(e){this.addOperations("filter",e.filters),this.addOperations("picker",e.pickers),this.addOperations("mapper",e.mappers),this.addOperations("reducer",e.reducers)}},{key:"addOperations",value:function(e,t){for(var r in t)this.addOperation(e,r,t[r])}},{key:"addOperation",value:function(e,t,r){if(!e)return function(e,t){return console.warn(e+" is not a valid process type."),!1}();d[e+"s"][t]=r}},{key:"addFilter",value:function(e,t){this.addOperation("filter",e,t)}},{key:"addMapper",value:function(e,t){this.addOperation("mapper",e,t)}},{key:"addReducer",value:function(e,t){this.addOperation("reducer",e,t)}},{key:"applyParameters",value:function(e,t){var r=JSON.stringify(e);for(var n in t)r=r.replace(new RegExp("#"+n+"#","g"),t[n]);return JSON.parse(r)}},{key:"cook",value:function(e,t,r){return g.call(this,e,t,r)}},{key:"helper",value:function(){return u.default}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=o(r(2)),u=o(r(3));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e,t){for(var r,n,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=e.length,s=0;s<i;s++){for(a in r={},n=e[s])r[n[a]]=u.default.get(t,a);o.push(r)}return o};t.default={overturn:function(e,t){if(!t.pivot)return console.warn("Overturn operation needs a 'pivot' parameter."),e;var r=t.pivot,n=t.dest||"parent",u=t.child||null,o=!!t.includeEmpty;return e.reduce(function(e,t){return function(e,t,r,n,u){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=a.default.omit(t,r),s=t[r];return a.default.isArray(s)?(o&&0===s.length&&s.push({}),e.concat(s.map(function(e){if(a.default.isObject(e))e[n]=i;else if(u){var t={};t[n]=i,t[u]=e,e=t}return e}))):a.default.isObject(s)||o&&(s={})?(s[n]=i,e.push(s),e):e}(e,t,r,n,u,o)},[])},filter:function(e,t,r){return t?(Array.isArray(t)||(t=[t]),e.filter(function(e){return t.reduce(function(t,n){return t&&r("filter",n.name,e,n)},!0)})):e},pick:function(e,t){return e.map(function(e){var r={};return t.keys&&u.default.iterateKeys(e,t.keys,function(n){t.values&&u.default.evalValues(t.values,e[n])?r[n]=e[n]:t.values||(r[n]=e[n])}),t.paths&&u.default.iterateMap(e,t.paths,null,function(e,t){r=u.default.set(r,e,t)}),r})},sort:function(e,t,r){return t?(Array.isArray(t)||(t=[t]),e.sort(function(e){return t.reduce(function(t,n){return t&&r("sorter",n.name,e,n)},!0)})):e},map:function(e,t,r){return t?(Array.isArray(t)||(t=[t]),e.map(function(e){return t.forEach(function(t){u.default.iterateKeys(e,t.keys,function(n){e[n]=r("mapper",t.name,e[n],t)})},{}),e})):e},explode:function(e,t){return e.reduce(function(e,r){return e.concat(Object.keys(r).reduce(function(e,n){var a={};if(t.id){if(t.id.includes(n))return e;a.id=u.default.get(r,t.id)}return a[t.key?t.key:"key"]=n,a[t.value?t.value:"value"]=r[n],e.push(a),e},[]))},[])},select:function(e,t,r){return t?(Array.isArray(t)||(t=[t]),e.map(function(e){return t.reduce(function(t,n){return t[n.dest]=r("selector",n.name,e,n),t},{})})):e},uniq:function(e,t){var r=[],n={};if(!t||!t.path)return console.warn("A 'path' parameter must be provided for the uniq operation."),e;for(var a=e.length-1;a>=0;a--)1!==n[u.default.get(e[a],t.path)]&&(n[u.default.get(e[a],t.path)]=1,r.push(e[a]));return r},reduce:function(e,t,r){return t?(Array.isArray(t)||(t=[t]),t.reduce(function(t,n){var a=n.start||0;if(n.group&&n.path){var o=t,i=void 0,s=e.reduce(function(e,t){return e[i=u.default.get(t,n.group)]=e[i]||0,e[i]++,e},{});n.dest&&(t[n.dest]={},o=t[n.dest]);var c={};e.forEach(function(e){i=u.default.get(e,n.group),c[i]=c[i]||0,o[i]=r("reducer",n.name,n,o[i]||a,u.default.get(e,n.path),c[i],s[i]),c[i]++})}else n.path&&n.dest?t[n.dest]=e.reduce(function(t,a,o){return r("reducer",n.name,n,t,u.default.get(a,n.path),o,e.length)},a):n.keys&&e.forEach(function(o,i){u.default.iterateKeys(o,n.keys,function(u){t[u]=r("reducer",n.name,n,t[u]||a,o[u],i,e.length)})});return t},{})):e},pivot:function(e,t){for(var r,n={sum:function(e,r){return e+u.default.get(r,t.aggregationPath,0)},count:function(e,t){return e+1}},a=[],o={},i=[],s=void 0,c=t.rowSourcePath,l=t.rowTargetPath||c,f=t.columnPath,d=!!t.includeRowTotal,p=!!t.includeColumnTotal,h=t.totalRowName||"Total",_=t.totalColumnName||"Total",v=n[t.aggregationOp||"count"],m=void 0,y=void 0,g=void 0,b=void 0,E=0,O=e.length;E<O;E++)if(m=e[E],g=u.default.get(m,c,void 0)){if(o[g])y=o[g];else{y={};for(var x=i.length-1;x>=0;x--)y[i[x]]=0;o[g]=y,a.push(y),u.default.set(y,l,g)}if(s=u.default.get(m,f,void 0)){if(-1===i.indexOf(s)){i.push(s);for(var A=a.length-1;A>=0;A--)a[A][s]=0}b=y[s]||0,y[s]=v(b,m)}}(d||p)&&function(){var e=void 0,t={};if(p){for(E=i.length-1;E>=0;E--)t[i[E]]=0;u.default.set(t,l,_)}for(E=0,r=a.length;E<r;E++){if(e=a[E],p)for(x=i.length-1;x>=0;x--)s=i[x],t[s]+=e[s];d&&(e[h]=i.reduce(function(t,r){return t+e[r]},0))}p&&(d&&(t[h]=i.reduce(function(e,r){return e+t[r]},0)),a.push(t))}();return a},classify:function(e,t){if(!t||!t.path)return console.warn("A 'path' parameter must be provided for the classify operation."),e;for(var r=t.path,a=void 0,o=t.dest||"dest",i=t.id||r,s=t.default,c={},l=e.length,f=void 0,d=0;d<l;d++)f=e[d],a=u.default.get(f,r),c[a=void 0!==a?a:s]=c[a]||{},c[a][o]=c[a][o]||[],c[a][o].push(f);return Object.keys(c).map(function(e){return n(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},i,e),c[e])})},split:function(e,t){if(!t||!t.parts)return console.warn("A 'parts' parameter must be provided for the split operation."),e;for(var r=[],n=t.parts,a=e.length,u=0;u<a;u++)r=i(n,e[u],r);return r}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(r(2)),u=i(r(3)),o=i(r(5));function i(e){return e&&e.__esModule?e:{default:e}}var s={},c=function(e,t,r){return a.default.isArray(t)?t.reduce(function(t,n){return t||r(e,n)},!1):r(e,t)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t.path)return u.default.get(e,t.path);if(t.expr){var n=t.expr;s[n]||(s[n]=new o.default(n));var a=s[n];return a.eval(e)}return r};t.default={match:function(e,t){return c(l(e,t),t.match,function(e,t){return e===t})},mismatch:function(e,t){return c(l(e,t),t.match,function(e,t){return e!==t})},matchType:function(e,t){return c(l(e,t),t.match,function(e,t){return(void 0===e?"undefined":n(e))===t})},mismatchType:function(e,t){return c(l(e,t),t.match,function(e,t){return(void 0===e?"undefined":n(e))!==t})},includes:function(e,t){return c(l(e,t),t.match,function(e,t){return e.includes(t)})},excludes:function(e,t){return c(l(e,t),t.match,function(e,t){return!e.includes(t)})},compare:function(e,t){return u.default.compare(l(e,t),t.match,t.operator)},start:function(e,t){return c(l(e,t,""),t.match,function(e,t){return 0===e.indexOf(t)})},end:function(e,t){return c(l(e,t,""),t.match,function(e,t){return-1!==e.indexOf(t,e.length-t.length)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={string:String,number:Number,boolean:Boolean};t.default={pass:function(e,t){return e},replace:function(e,t){if("string"!=typeof e)return e;var r=t.match||"";return t.regex&&(r=new RegExp(t.regex,"i")),e.replace(r,t.replacement||"")},substring:function(e,t){return"string"!=typeof e?e:e.substring(t.start||0,t.end||void 0)},translate:function(e,t){var r=t.conversions||t.convertions||{};return void 0!==r[e]?r[e]:e},classify:function(e,t){var r=t.conversions||t.convertions||{},n=Math.round(e);return void 0!==r[n]?r[n]:e},stratify:function(e,t){var r=t.conversions||t.convertions||{},n=t.default||e;return Object.keys(r).forEach(function(t){var a=t.split("-");2===a.length&&e>=Number(a[0])&&e<=Number(a[1])&&(n=r[t])}),n},cast:function(e,t){var r=t.type||"number";return n[r](e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(3)),a=o(r(2)),u=o(r(5));function o(e){return e&&e.__esModule?e:{default:e}}var i={};t.default={extract:function(e,t){return n.default.get(e,t.path,t.default)},join:function(e,t){return t.paths.map(function(r){return n.default.get(e,r,t.default)}).join(t.separator||" ")},split:function(e,t){return n.default.get(e,t.path,"").split(t.separator||" ")},format:function(e,t){return t.paths.reduce(function(r,a,u){return r.replace("{"+u+"}",n.default.get(e,a,t.default))},t.format||"")},compare:function(e,t){return n.default.compare(n.default.get(e,t.path),t.match,t.operator)?t.truth:t.false},operation:function(e,t){return t.path?n.default.calculate([n.default.get(e,t.path),t.operand],t.operator):t.paths?n.default.calculate(n.default.extractMap(e,t.paths),t.operator):t.keys?n.default.calculate(n.default.extractKeyValues(e,t.keys),t.operator):0},average:function(e,t){return t.paths?n.default.average(n.default.extractMap(e,t.paths)):t.keys?n.default.average(n.default.extractKeyValues(e,t.keys)):0},existsInArray:function(e,t){var r=n.default.get(e,t.path);if(!a.default.isArray(r))return r;var u=t.matchValue||1,o=t.mismatchValue||0;return-1!==r.indexOf(t.match)?u:o},pluck:function(e,t){var r=n.default.get(e,t.path);return a.default.isArray(r)&&t.property?r.map(function(e){return n.default.get(e,t.property,t.default||e)}):r},count:function(e,t){var r=n.default.get(e,t.path);return a.default.isArray(r)?t.match?r.filter(function(e){return n.default.compare(e,t.match,t.operator)}).length:r.length:r},merge:function(e,t){var r=[],u=void 0;return t.paths.forEach(function(t){u=n.default.get(e,t),a.default.isArray(u)&&(r=r.concat(u))}),r},zip:function(e,t){var r=[],u=void 0,o=void 0,i=void 0;return t.paths.forEach(function(t){if(u=n.default.get(e,t),a.default.isArray(u))for(i=u.length,o=0;o<i;o++)r[o]||(r[o]=[]),r[o].push(u[o])}),r},itemAt:function(e,t){var r=n.default.get(e,t.path);if(!a.default.isArray(r))return t.default;var u=void 0!==t.index?t.index:0,o=r.length;if(0===o)return t.default;for(;u<0;)u=o+u;return void 0!==r[u]?r[u]:t.default},groupBy:function(e,t){var r=n.default.get(e,t.path),u=t.default;if(!a.default.isArray(r))return u;if(!t.group)return console.warn("A 'group' parameter must be provided for the groupBy operation."),u;for(var o={},i=void 0,s=t.group,c=void 0,l=r.length-1;l>=0;l--)c=r[l],o[i=void 0!==(i=n.default.get(c,s))?i:u]=o[i]||[],o[i].push(c);return o},objKeys:function(e,t){var r=n.default.get(e,t.path);return a.default.isObject?Object.keys(r):r},objValues:function(e,t){var r=n.default.get(e,t.path);return a.default.isObject?Object.values(r):r},objEntries:function(e,t){var r=n.default.get(e,t.path);return a.default.isObject?Object.entries(r):r},formula:function(e,t){return t.expr?(i[t.expr]||(i[t.expr]=new u.default(t.expr)),i[t.expr].eval(e)):(console.warn("Invalid FormulaValue expression ('expr')."),e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(2)),a=u(r(3));function u(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r,n){return e.match?e.match===r?n():t:n()};t.default={count:function(e,t,r){return o(e,t,r,function(){return r?t+1:t})},operation:function(e,t,r){return o(e,t,r,function(){return a.default.calculate([r,t],e.operator)})},average:function(e,t,r,n,u){return o(e,t,r,function(){var e=a.default.calculate([r,t],"addition");return n<u-1?e:e/u})},sum:function(e,t,r){return o(e,t,r,function(){return a.default.calculate([r,t],"addition")})},sumAndOperation:function(e,t,r){var n=a.default.calculate([r,t],"addition");return a.default.calculate([n,e.operand],e.operator)},array:function(e,t,r){return(t=n.default.isArray(t)?t:[]).push(r),t}}}])});
//# sourceMappingURL=sushi.js.map